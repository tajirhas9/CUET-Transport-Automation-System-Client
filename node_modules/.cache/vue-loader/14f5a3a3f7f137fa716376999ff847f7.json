{"remainingRequest":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tajirhas9/varsity/software_engineering/ctas/client/src/pwa/components/ServiceWorkerUpdatePopup.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/src/pwa/components/ServiceWorkerUpdatePopup.vue","mtime":1640465303000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKCkBDb21wb25lbnQoewogIG5hbWU6ICdTZXJ2aWNlV29ya2VyVXBkYXRlUG9wdXAnCn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgVnVlIHsKICBwcml2YXRlIHJlZnJlc2hpbmcgPSBmYWxzZQogIHByaXZhdGUgbm90aWZpY2F0aW9uVGV4dCA9ICdOZXcgY29udGVudCBpcyBhdmFpbGFibGUhJwogIHByaXZhdGUgcmVmcmVzaEJ1dHRvblRleHQgPSAnUmVmcmVzaCcKICBwcml2YXRlIHJlZ2lzdHJhdGlvbjogU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiB8IG51bGwgPSBudWxsCgogIGNyZWF0ZWQoKSB7CiAgICAvLyBMaXN0ZW4gZm9yIHN3VXBkYXRlZCBldmVudCBhbmQgZGlzcGxheSByZWZyZXNoIG5vdGlmaWNhdGlvbiBhcyByZXF1aXJlZC4KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N3VXBkYXRlZCcsIHRoaXMuc2hvd1JlZnJlc2hVSSwgeyBvbmNlOiB0cnVlIH0pCiAgICAvLyBSZWZyZXNoIGFsbCBvcGVuIGFwcCB0YWJzIHdoZW4gYSBuZXcgc2VydmljZSB3b3JrZXIgaXMgaW5zdGFsbGVkLgogICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsICgpID0+IHsKICAgICAgaWYgKHRoaXMucmVmcmVzaGluZykgcmV0dXJuCiAgICAgIHRoaXMucmVmcmVzaGluZyA9IHRydWUKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpCiAgICB9KQogIH0KCiAgcmVuZGVyKCkgewogICAgLy8gQXZvaWQgd2FybmluZyBmb3IgbWlzc2luZyB0ZW1wbGF0ZQogIH0KCiAgcHJpdmF0ZSBzaG93UmVmcmVzaFVJKGU6IEV2ZW50KSB7CiAgICAvLyBEaXNwbGF5IGEgbm90aWZpY2F0aW9uIGludml0aW5nIHRoZSB1c2VyIHRvIHJlZnJlc2gvcmVsb2FkIHRoZSBhcHAgZHVlCiAgICAvLyB0byBhbiBhcHAgdXBkYXRlIGJlaW5nIGF2YWlsYWJsZS4KICAgIC8vIFRoZSBuZXcgc2VydmljZSB3b3JrZXIgaXMgaW5zdGFsbGVkLCBidXQgbm90IHlldCBhY3RpdmUuCiAgICAvLyBTdG9yZSB0aGUgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlLgogICAgY29uc3QgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQKICAgIHRoaXMucmVnaXN0cmF0aW9uID0gKGUgYXMgQ3VzdG9tRXZlbnQpLmRldGFpbAogICAgdGhpcy4kbm90aWZ5LmluZm8oewogICAgICB0aXRsZTogJ1VwZGF0ZSBhdmFpbGFibGUnLAogICAgICBtZXNzYWdlOiBoKCdkaXYnLCB7IGNsYXNzOiAnc3ctdXBkYXRlLXBvcHVwJyB9LCBbCiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25UZXh0LAogICAgICAgIGgoJ2JyJyksCiAgICAgICAgaCgnYnV0dG9uJywgewogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2xpY2s6IChlOiBFdmVudCkgPT4gewogICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgIHRoaXMucmVmcmVzaEFwcCgpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB0aGlzLnJlZnJlc2hCdXR0b25UZXh0KQogICAgICBdKSwKICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnLAogICAgICBkdXJhdGlvbjogMAogICAgfSkKICB9CgogIHByaXZhdGUgcmVmcmVzaEFwcCgpIHsKICAgIC8vIFByb3RlY3QgYWdhaW5zdCBtaXNzaW5nIHJlZ2lzdHJhdGlvbi53YWl0aW5nLgogICAgaWYgKCF0aGlzLnJlZ2lzdHJhdGlvbiB8fCAhdGhpcy5yZWdpc3RyYXRpb24ud2FpdGluZykgcmV0dXJuCiAgICB0aGlzLnJlZ2lzdHJhdGlvbi53YWl0aW5nLnBvc3RNZXNzYWdlKCdza2lwV2FpdGluZycpCiAgfQp9Cg=="},{"version":3,"sources":["ServiceWorkerUpdatePopup.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ServiceWorkerUpdatePopup.vue","sourceRoot":"src/pwa/components","sourcesContent":["<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\n\n@Component({\n  name: 'ServiceWorkerUpdatePopup'\n})\nexport default class extends Vue {\n  private refreshing = false\n  private notificationText = 'New content is available!'\n  private refreshButtonText = 'Refresh'\n  private registration: ServiceWorkerRegistration | null = null\n\n  created() {\n    // Listen for swUpdated event and display refresh notification as required.\n    document.addEventListener('swUpdated', this.showRefreshUI, { once: true })\n    // Refresh all open app tabs when a new service worker is installed.\n    navigator.serviceWorker.addEventListener('controllerchange', () => {\n      if (this.refreshing) return\n      this.refreshing = true\n      window.location.reload()\n    })\n  }\n\n  render() {\n    // Avoid warning for missing template\n  }\n\n  private showRefreshUI(e: Event) {\n    // Display a notification inviting the user to refresh/reload the app due\n    // to an app update being available.\n    // The new service worker is installed, but not yet active.\n    // Store the ServiceWorkerRegistration instance for later use.\n    const h = this.$createElement\n    this.registration = (e as CustomEvent).detail\n    this.$notify.info({\n      title: 'Update available',\n      message: h('div', { class: 'sw-update-popup' }, [\n        this.notificationText,\n        h('br'),\n        h('button', {\n          on: {\n            click: (e: Event) => {\n              e.preventDefault()\n              this.refreshApp()\n            }\n          }\n        }, this.refreshButtonText)\n      ]),\n      position: 'bottom-right',\n      duration: 0\n    })\n  }\n\n  private refreshApp() {\n    // Protect against missing registration.waiting.\n    if (!this.registration || !this.registration.waiting) return\n    this.registration.waiting.postMessage('skipWaiting')\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sw-update-popup > button {\n  margin-top: 0.5em;\n  padding: 0.25em 1.5em;\n}\n</style>\n"]}]}