{"remainingRequest":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tajirhas9/varsity/software_engineering/ctas/client/src/components/ThemePicker/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/src/components/ThemePicker/index.vue","mtime":1640465303000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCB7IFNldHRpbmdzTW9kdWxlIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGVzL3NldHRpbmdzJwoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMKY29uc3QgdmVyc2lvbiA9IHJlcXVpcmUoJ2VsZW1lbnQtdWkvcGFja2FnZS5qc29uJykudmVyc2lvbiAvLyBlbGVtZW50LXVpIHZlcnNpb24gZnJvbSBub2RlX21vZHVsZXMKY29uc3QgT1JJR0lOQUxfVEhFTUUgPSAnIzQwOUVGRicgLy8gZGVmYXVsdCBjb2xvcgoKQENvbXBvbmVudCh7CiAgbmFtZTogJ1RoZW1lUGlja2VyJwp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIFZ1ZSB7CiAgcHJpdmF0ZSBjaGFsayA9ICcnIC8vIFRoZSBjb250ZW50IG9mIHRoZW1lLWNoYWxrIGNzcwogIHByaXZhdGUgdGhlbWUgPSAnJwoKICBnZXQgZGVmYXVsdFRoZW1lKCkgewogICAgcmV0dXJuIFNldHRpbmdzTW9kdWxlLnRoZW1lCiAgfQoKICBAV2F0Y2goJ2RlZmF1bHRUaGVtZScsIHsgaW1tZWRpYXRlOiB0cnVlIH0pCiAgcHJpdmF0ZSBvbkRlZmF1bHRUaGVtZUNoYW5nZSh2YWx1ZTogc3RyaW5nKSB7CiAgICB0aGlzLnRoZW1lID0gdmFsdWUKICB9CgogIEBXYXRjaCgndGhlbWUnKQogIHByaXZhdGUgYXN5bmMgb25UaGVtZUNoYW5nZSh2YWx1ZTogc3RyaW5nKSB7CiAgICBpZiAoIXZhbHVlKSByZXR1cm4KICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5jaGFsayA/IHRoaXMudGhlbWUgOiBPUklHSU5BTF9USEVNRQogICAgY29uc3QgdGhlbWVDbHVzdGVyID0gdGhpcy5nZXRUaGVtZUNsdXN0ZXIodmFsdWUucmVwbGFjZSgnIycsICcnKSkKICAgIGNvbnN0IG9yaWdpbmFsQ2x1c3RlciA9IHRoaXMuZ2V0VGhlbWVDbHVzdGVyKG9sZFZhbHVlLnJlcGxhY2UoJyMnLCAnJykpCiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy4kbWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6ICcgIENvbXBpbGluZyB0aGUgdGhlbWUnLAogICAgICBjdXN0b21DbGFzczogJ3RoZW1lLW1lc3NhZ2UnLAogICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgIGR1cmF0aW9uOiAwLAogICAgICBpY29uQ2xhc3M6ICdlbC1pY29uLWxvYWRpbmcnCiAgICB9KQoKICAgIGlmICghdGhpcy5jaGFsaykgewogICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly91bnBrZy5jb20vZWxlbWVudC11aUAke3ZlcnNpb259L2xpYi90aGVtZS1jaGFsay9pbmRleC5jc3NgCiAgICAgIGF3YWl0IHRoaXMuZ2V0Q1NTU3RyaW5nKHVybCwgJ2NoYWxrJykKICAgIH0KCiAgICBjb25zdCBnZXRIYW5kbGVyID0gKHZhcmlhYmxlOiBzdHJpbmcsIGlkOiBzdHJpbmcpID0+IHsKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBjb25zdCBvcmlnaW5hbENsdXN0ZXIgPSB0aGlzLmdldFRoZW1lQ2x1c3RlcihPUklHSU5BTF9USEVNRS5yZXBsYWNlKCcjJywgJycpKQogICAgICAgIGNvbnN0IG5ld1N0eWxlID0gdGhpcy51cGRhdGVTdHlsZSgodGhpcyBhcyBhbnkpW3ZhcmlhYmxlXSwgb3JpZ2luYWxDbHVzdGVyLCB0aGVtZUNsdXN0ZXIpCgogICAgICAgIGxldCBzdHlsZVRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKQogICAgICAgIGlmICghc3R5bGVUYWcpIHsKICAgICAgICAgIHN0eWxlVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKQogICAgICAgICAgc3R5bGVUYWcuc2V0QXR0cmlidXRlKCdpZCcsIGlkKQogICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVRhZykKICAgICAgICB9CiAgICAgICAgc3R5bGVUYWcuaW5uZXJUZXh0ID0gbmV3U3R5bGUKICAgICAgfQogICAgfQogICAgY29uc3QgY2hhbGtIYW5kbGVyID0gZ2V0SGFuZGxlcignY2hhbGsnLCAnY2hhbGstc3R5bGUnKQogICAgY2hhbGtIYW5kbGVyKCkKCiAgICBsZXQgc3R5bGVzOiBIVE1MRWxlbWVudFtdID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpKQogICAgc3R5bGVzID0gc3R5bGVzCiAgICAgIC5maWx0ZXIoc3R5bGUgPT4gewogICAgICAgIGNvbnN0IHRleHQgPSBzdHlsZS5pbm5lclRleHQKICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChvbGRWYWx1ZSwgJ2knKS50ZXN0KHRleHQpICYmICEvQ2hhbGsgVmFyaWFibGVzLy50ZXN0KHRleHQpCiAgICAgIH0pCiAgICBzdHlsZXMuZm9yRWFjaChzdHlsZSA9PiB7CiAgICAgIGNvbnN0IHsgaW5uZXJUZXh0IH0gPSBzdHlsZQogICAgICBpZiAodHlwZW9mIGlubmVyVGV4dCAhPT0gJ3N0cmluZycpIHJldHVybgogICAgICBzdHlsZS5pbm5lclRleHQgPSB0aGlzLnVwZGF0ZVN0eWxlKGlubmVyVGV4dCwgb3JpZ2luYWxDbHVzdGVyLCB0aGVtZUNsdXN0ZXIpCiAgICB9KQoKICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHZhbHVlKQogICAgbWVzc2FnZS5jbG9zZSgpCiAgfQoKICBwcml2YXRlIHVwZGF0ZVN0eWxlKHN0eWxlOiBzdHJpbmcsIG9sZENsdXN0ZXI6IHN0cmluZ1tdLCBuZXdDbHVzdGVyOiBzdHJpbmdbXSkgewogICAgbGV0IG5ld1N0eWxlID0gc3R5bGUKICAgIG9sZENsdXN0ZXIuZm9yRWFjaCgoY29sb3IsIGluZGV4KSA9PiB7CiAgICAgIG5ld1N0eWxlID0gbmV3U3R5bGUucmVwbGFjZShuZXcgUmVnRXhwKGNvbG9yLCAnaWcnKSwgbmV3Q2x1c3RlcltpbmRleF0pCiAgICB9KQogICAgcmV0dXJuIG5ld1N0eWxlCiAgfQoKICBwcml2YXRlIGdldENTU1N0cmluZyh1cmw6IHN0cmluZywgdmFyaWFibGU6IHN0cmluZykgewogICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4gewogICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKQogICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4gewogICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCAmJiB4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICh0aGlzIGFzIGFueSlbdmFyaWFibGVdID0geGhyLnJlc3BvbnNlVGV4dC5yZXBsYWNlKC9AZm9udC1mYWNle1tefV0rfS8sICcnKQogICAgICAgICAgcmVzb2x2ZSgpCiAgICAgICAgfQogICAgICB9CiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpCiAgICAgIHhoci5zZW5kKCkKICAgIH0pCiAgfQoKICBwcml2YXRlIGdldFRoZW1lQ2x1c3Rlcih0aGVtZTogc3RyaW5nKSB7CiAgICBjb25zdCB0aW50Q29sb3IgPSAoY29sb3I6IHN0cmluZywgdGludDogbnVtYmVyKSA9PiB7CiAgICAgIGxldCByZWQgPSBwYXJzZUludChjb2xvci5zbGljZSgwLCAyKSwgMTYpCiAgICAgIGxldCBncmVlbiA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDIsIDQpLCAxNikKICAgICAgbGV0IGJsdWUgPSBwYXJzZUludChjb2xvci5zbGljZSg0LCA2KSwgMTYpCiAgICAgIGlmICh0aW50ID09PSAwKSB7IC8vIHdoZW4gcHJpbWFyeSBjb2xvciBpcyBpbiBpdHMgcmdiIHNwYWNlCiAgICAgICAgcmV0dXJuIFtyZWQsIGdyZWVuLCBibHVlXS5qb2luKCcsJykKICAgICAgfSBlbHNlIHsKICAgICAgICByZWQgKz0gTWF0aC5yb3VuZCh0aW50ICogKDI1NSAtIHJlZCkpCiAgICAgICAgZ3JlZW4gKz0gTWF0aC5yb3VuZCh0aW50ICogKDI1NSAtIGdyZWVuKSkKICAgICAgICBibHVlICs9IE1hdGgucm91bmQodGludCAqICgyNTUgLSBibHVlKSkKICAgICAgICByZXR1cm4gYCMke3JlZC50b1N0cmluZygxNil9JHtncmVlbi50b1N0cmluZygxNil9JHtibHVlLnRvU3RyaW5nKDE2KX1gCiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBzaGFkZUNvbG9yID0gKGNvbG9yOiBzdHJpbmcsIHNoYWRlOiBudW1iZXIpID0+IHsKICAgICAgbGV0IHJlZCA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDAsIDIpLCAxNikKICAgICAgbGV0IGdyZWVuID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMiwgNCksIDE2KQogICAgICBsZXQgYmx1ZSA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDQsIDYpLCAxNikKICAgICAgcmVkID0gTWF0aC5yb3VuZCgoMSAtIHNoYWRlKSAqIHJlZCkKICAgICAgZ3JlZW4gPSBNYXRoLnJvdW5kKCgxIC0gc2hhZGUpICogZ3JlZW4pCiAgICAgIGJsdWUgPSBNYXRoLnJvdW5kKCgxIC0gc2hhZGUpICogYmx1ZSkKICAgICAgcmV0dXJuIGAjJHtyZWQudG9TdHJpbmcoMTYpfSR7Z3JlZW4udG9TdHJpbmcoMTYpfSR7Ymx1ZS50b1N0cmluZygxNil9YAogICAgfQoKICAgIGNvbnN0IGNsdXN0ZXJzID0gW3RoZW1lXQogICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gOTsgaSsrKSB7CiAgICAgIGNsdXN0ZXJzLnB1c2godGludENvbG9yKHRoZW1lLCBOdW1iZXIoKGkgLyAxMCkudG9GaXhlZCgyKSkpKQogICAgfQogICAgY2x1c3RlcnMucHVzaChzaGFkZUNvbG9yKHRoZW1lLCAwLjEpKQogICAgcmV0dXJuIGNsdXN0ZXJzCiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ThemePicker","sourcesContent":["<template>\n  <el-color-picker\n    v-model=\"theme\"\n    :predefine=\"['#409EFF', '#1890ff', '#304156','#212121','#11a983', '#13c2c2', '#6959CD', '#f5222d']\"\n    class=\"theme-picker\"\n    popper-class=\"theme-picker-dropdown\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport { SettingsModule } from '@/store/modules/settings'\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst version = require('element-ui/package.json').version // element-ui version from node_modules\nconst ORIGINAL_THEME = '#409EFF' // default color\n\n@Component({\n  name: 'ThemePicker'\n})\nexport default class extends Vue {\n  private chalk = '' // The content of theme-chalk css\n  private theme = ''\n\n  get defaultTheme() {\n    return SettingsModule.theme\n  }\n\n  @Watch('defaultTheme', { immediate: true })\n  private onDefaultThemeChange(value: string) {\n    this.theme = value\n  }\n\n  @Watch('theme')\n  private async onThemeChange(value: string) {\n    if (!value) return\n    const oldValue = this.chalk ? this.theme : ORIGINAL_THEME\n    const themeCluster = this.getThemeCluster(value.replace('#', ''))\n    const originalCluster = this.getThemeCluster(oldValue.replace('#', ''))\n    const message = this.$message({\n      message: '  Compiling the theme',\n      customClass: 'theme-message',\n      type: 'success',\n      duration: 0,\n      iconClass: 'el-icon-loading'\n    })\n\n    if (!this.chalk) {\n      const url = `https://unpkg.com/element-ui@${version}/lib/theme-chalk/index.css`\n      await this.getCSSString(url, 'chalk')\n    }\n\n    const getHandler = (variable: string, id: string) => {\n      return () => {\n        const originalCluster = this.getThemeCluster(ORIGINAL_THEME.replace('#', ''))\n        const newStyle = this.updateStyle((this as any)[variable], originalCluster, themeCluster)\n\n        let styleTag = document.getElementById(id)\n        if (!styleTag) {\n          styleTag = document.createElement('style')\n          styleTag.setAttribute('id', id)\n          document.head.appendChild(styleTag)\n        }\n        styleTag.innerText = newStyle\n      }\n    }\n    const chalkHandler = getHandler('chalk', 'chalk-style')\n    chalkHandler()\n\n    let styles: HTMLElement[] = [].slice.call(document.querySelectorAll('style'))\n    styles = styles\n      .filter(style => {\n        const text = style.innerText\n        return new RegExp(oldValue, 'i').test(text) && !/Chalk Variables/.test(text)\n      })\n    styles.forEach(style => {\n      const { innerText } = style\n      if (typeof innerText !== 'string') return\n      style.innerText = this.updateStyle(innerText, originalCluster, themeCluster)\n    })\n\n    this.$emit('change', value)\n    message.close()\n  }\n\n  private updateStyle(style: string, oldCluster: string[], newCluster: string[]) {\n    let newStyle = style\n    oldCluster.forEach((color, index) => {\n      newStyle = newStyle.replace(new RegExp(color, 'ig'), newCluster[index])\n    })\n    return newStyle\n  }\n\n  private getCSSString(url: string, variable: string) {\n    return new Promise<void>(resolve => {\n      const xhr = new XMLHttpRequest()\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n          (this as any)[variable] = xhr.responseText.replace(/@font-face{[^}]+}/, '')\n          resolve()\n        }\n      }\n      xhr.open('GET', url)\n      xhr.send()\n    })\n  }\n\n  private getThemeCluster(theme: string) {\n    const tintColor = (color: string, tint: number) => {\n      let red = parseInt(color.slice(0, 2), 16)\n      let green = parseInt(color.slice(2, 4), 16)\n      let blue = parseInt(color.slice(4, 6), 16)\n      if (tint === 0) { // when primary color is in its rgb space\n        return [red, green, blue].join(',')\n      } else {\n        red += Math.round(tint * (255 - red))\n        green += Math.round(tint * (255 - green))\n        blue += Math.round(tint * (255 - blue))\n        return `#${red.toString(16)}${green.toString(16)}${blue.toString(16)}`\n      }\n    }\n\n    const shadeColor = (color: string, shade: number) => {\n      let red = parseInt(color.slice(0, 2), 16)\n      let green = parseInt(color.slice(2, 4), 16)\n      let blue = parseInt(color.slice(4, 6), 16)\n      red = Math.round((1 - shade) * red)\n      green = Math.round((1 - shade) * green)\n      blue = Math.round((1 - shade) * blue)\n      return `#${red.toString(16)}${green.toString(16)}${blue.toString(16)}`\n    }\n\n    const clusters = [theme]\n    for (let i = 0; i <= 9; i++) {\n      clusters.push(tintColor(theme, Number((i / 10).toFixed(2))))\n    }\n    clusters.push(shadeColor(theme, 0.1))\n    return clusters\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.theme-message,\n.theme-picker-dropdown {\n  z-index: 99999 !important;\n}\n\n.theme-picker .el-color-picker__trigger {\n  height: 26px !important;\n  width: 26px !important;\n  padding: 2px;\n}\n\n.theme-picker-dropdown .el-color-dropdown__link-btn {\n  display: none;\n}\n</style>\n"]}]}