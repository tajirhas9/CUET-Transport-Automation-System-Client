{"remainingRequest":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/babel-loader/lib/index.js!/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/ts-loader/index.js??ref--15-2!/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/eslint-loader/index.js??ref--14-0!/home/tajirhas9/varsity/software_engineering/ctas/client/src/utils/request.ts","dependencies":[{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/src/utils/request.ts","mtime":1640465303000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/babel.config.js","mtime":1640465303000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBVc2VyTW9kdWxlIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGVzL3VzZXInOwp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICBoZWFkZXJzOiB7CiAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgfSwKICB0aW1lb3V0OiA1MDAwIC8vIHdpdGhDcmVkZW50aWFsczogdHJ1ZSAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKCn0pOyAvLyBSZXF1ZXN0IGludGVyY2VwdG9ycwoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIEFkZCBYLUFjY2Vzcy1Ub2tlbiBoZWFkZXIgdG8gZXZlcnkgcmVxdWVzdCwgeW91IGNhbiBhZGQgb3RoZXIgY3VzdG9tIGhlYWRlcnMgaGVyZQogIGlmIChVc2VyTW9kdWxlLnRva2VuKSB7CiAgICBjb25maWcuaGVhZGVycy5hdXRob3JpemF0aW9uID0gVXNlck1vZHVsZS50b2tlbjsKICB9CgogIGlmIChjb25maWcubWV0aG9kICE9PSAnZ2V0JykgewogICAgY29uc29sZS5sb2coIltyZXF1ZXN0XSAiLmNvbmNhdChjb25maWcubWV0aG9kLCAiICIpLmNvbmNhdChjb25maWcudXJsLCAiOiAiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmRhdGEpKSk7CiAgfSBlbHNlIHsKICAgIGNvbnNvbGUubG9nKCJbcmVxdWVzdF0gIi5jb25jYXQoY29uZmlnLm1ldGhvZCwgIiAiKS5jb25jYXQoY29uZmlnLnVybCkpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8gUmVzcG9uc2UgaW50ZXJjZXB0b3JzCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8gU29tZSBleGFtcGxlIGNvZGVzIGhlcmU6CiAgLy8gY29kZSA9PSAyMDA6IHN1Y2Nlc3MKICAvLyBjb2RlID09IDQwMzogaW52YWxpZCBhY2Nlc3MgdG9rZW4KICAvLyBjb2RlID09IDUwMDAyOiBhbHJlYWR5IGxvZ2luIGluIG90aGVyIHBsYWNlCiAgLy8gY29kZSA9PSA0MDM6IGFjY2VzcyB0b2tlbiBleHBpcmVkCiAgLy8gY29kZSA9PSA0MDE6IGludmFsaWQgdXNlciAodXNlciBub3QgZXhpc3QpCiAgLy8gY29kZSA9PSA0MDE6IHVzZXJuYW1lIG9yIHBhc3N3b3JkIGlzIGluY29ycmVjdAogIC8vIFlvdSBjYW4gY2hhbmdlIHRoaXMgcGFydCBmb3IgeW91ciBvd24gdXNhZ2UuCiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgIT09IDIwMSkgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5tZXNzYWdlIHx8ICdFcnJvcicpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoIWVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgY29uc29sZS5lcnJvcignUmVzcG9uc2UgbWVzc2FnZSBub3QgZm91bmQuJyk7CiAgfQoKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDMgfHwgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgIGNvbnNvbGUubG9nKCJbcmVzcG9uc2VdICIuY29uY2F0KGVycm9yLnJlc3BvbnNlLmNvbmZpZy5tZXRob2QsICIgIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmNvbmZpZy51cmwsICI6ICIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlcnJvci5yZXNwb25zZS5kYXRhKSkpOwogICAgTWVzc2FnZUJveC5jb25maXJtKCdZb3UgaGF2ZSBiZWVuIGxvZ2dlZCBvdXQsIHlvdSBjYW4gY2FuY2VsIHRvIHN0YXkgb24gdGhpcyBwYWdlLCBvciBsb2cgaW4gYWdhaW4nLCAnU3VyZSB0byBsb2cgb3V0JywgewogICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0xvZ2luIGFnYWluJywKICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcsCiAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIFVzZXJNb2R1bGUuUmVzZXRUb2tlbigpOwogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8gVG8gcHJldmVudCBidWdzIGZyb20gdnVlLXJvdXRlcgogICAgfSk7CiAgfSBlbHNlIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgICB9KTsKICB9IGVsc2UgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSA/IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSA6IGVycm9yLm1lc3NhZ2UsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["/home/tajirhas9/varsity/software_engineering/ctas/client/node_modules/eslint-loader/index.js??ref--14-0!/home/tajirhas9/varsity/software_engineering/ctas/client/src/utils/request.ts"],"names":[],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { Message, MessageBox } from 'element-ui'\nimport { UserModule } from '@/store/modules/user'\n\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  headers: {\n    'content-type': 'application/json'\n  },\n  timeout: 5000\n  // withCredentials: true // send cookies when cross-domain requests\n})\n\n// Request interceptors\nservice.interceptors.request.use(\n  (config) => {\n    // Add X-Access-Token header to every request, you can add other custom headers here\n    if (UserModule.token) {\n      config.headers.authorization = UserModule.token\n    }\n    if (config.method !== 'get') {\n      console.log(`[request] ${config.method} ${config.url}: ${JSON.stringify(config.data)}`)\n    } else {\n      console.log(`[request] ${config.method} ${config.url}`)\n    }\n    return config\n  },\n  (error) => {\n    Promise.reject(error)\n  }\n)\n\n// Response interceptors\nservice.interceptors.response.use(\n  (response) => {\n    // Some example codes here:\n    // code == 200: success\n    // code == 403: invalid access token\n    // code == 50002: already login in other place\n    // code == 403: access token expired\n    // code == 401: invalid user (user not exist)\n    // code == 401: username or password is incorrect\n    // You can change this part for your own usage.\n    const res = response.data\n    if (response.status !== 200 && response.status !== 201) {\n      Message({\n        message: res.message || 'Error',\n        type: 'error',\n        duration: 5 * 1000\n      })\n      return Promise.reject(new Error(res.message || 'Error'))\n    } else {\n      return response.data\n    }\n  },\n  (error) => {\n    if (!error.response.data.message) {\n      console.error('Response message not found.')\n    }\n    if (error.response.status === 403 || error.response.status === 401) {\n      console.log(`[response] ${error.response.config.method} ${error.response.config.url}: ${JSON.stringify(error.response.data)}`)\n      MessageBox.confirm(\n        'You have been logged out, you can cancel to stay on this page, or log in again',\n        'Sure to log out',\n        {\n          confirmButtonText: 'Login again',\n          cancelButtonText: 'Cancel',\n          type: 'warning'\n        }\n      ).then(() => {\n        UserModule.ResetToken()\n        location.reload() // To prevent bugs from vue-router\n      })\n    } else if (error.response.status === 409) {\n      Message({\n        message: error.response.data.message,\n        type: 'error',\n        duration: 5 * 1000\n      })\n    } else {\n      Message({\n        message: error.response.data.message ? error.response.data.message : error.message,\n        type: 'error',\n        duration: 5 * 1000\n      })\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"],"sourceRoot":""}]}