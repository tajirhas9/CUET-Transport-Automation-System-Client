(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c4c6b74"],{"04d1":function(e,t,r){var a=r("342f"),n=a.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},"4a5b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("schedule-table",{attrs:{driverIdProp:e.groupByDriverId}})},n=[],i=r("d4ec"),o=r("bee2"),s=r("262e"),l=r("2caf"),u=r("9ab4"),d=r("1b40"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table-holder"},[r("DxLoadPanel",{attrs:{position:e.loadPanelPosition,visible:e.listLoading}}),r("dx-data-grid",{ref:e.dataGridRefKey,staticClass:"grid",attrs:{id:"gridContainer","key-expr":"id","data-source":e.schedules,"show-borders":!0,"show-column-lines":!0,"row-alternation-enabled":!0,"column-auto-width":!0,"cell-hint-enabled":!0,"allow-column-resizing":!0,"allow-column-reordering":!0},on:{saving:e.onSaving,exporting:e.exportGrid,"toolbar-preparing":e.onToolbarPreparing,"editor-prepared":e.onEditorPrepared,"edit-canceling":e.onEditCanceling,"init-new-row":e.onInitNewRow,"cell-click":e.onCellClick},scopedSlots:e._u([{key:"title-header",fn:function(t){var a=t.data;return[r("div",{staticClass:"table-header"},[r("p",{staticClass:"table-header-text"},[e._v(e._s(a.column.caption))])])]}},{key:"cellTemplate",fn:function(t){var a=t.data;return[r("div",{staticStyle:{cursor:"pointer",color:"blue"},attrs:{title:a.text}},[r("a",[e._v(e._s(a.text))])])]}},{key:"statusTemplate",fn:function(t){var a=t.data;return[r("el-tag",{attrs:{type:e._f("statusFilter")(a.text)}},[e._v(" "+e._s(a.text)+" ")])]}},{key:"routeCellTemplate",fn:function(t){var a=t.data;return[r("p",e._l(e.thisRoute(a.data.route).checkpoints,(function(t,a){return r("span",{key:a},[r("span",0===a?[e._v(e._s(t))]:[e._v(" -> "+e._s(t))])])})),0)]}}])},[r("DxFilterRow",{attrs:{visible:!0}}),r("DxSearchPanel",{attrs:{visible:!0}}),r("DxGroupPanel",{attrs:{visible:!1}}),r("DxExport",{attrs:{enabled:!0}}),r("DxColumnChooser",{attrs:{enabled:!0}}),r("DxEditing",{attrs:{mode:"popup","allow-adding":e.getEditAccess,"allow-deleting":!1,"allow-updating":e.getEditAccess}},[r("DxPopup",{attrs:{"show-title":!0,width:700,height:525,title:e.popUpTitle}}),r("DxForm",[r("DxItem",{attrs:{"col-count":2,"col-span":2,"item-type":"group"}},[r("DxItem",{attrs:{"data-field":"bus"}}),r("DxItem",{attrs:{"data-field":"driver"}}),r("DxItem",{attrs:{"data-field":"datetime"}})],1),r("DxItem",{attrs:{"col-count":1,"col-span":2,"item-type":"group"}},[r("DxItem",{attrs:{"data-field":"busRoute"}})],1)],1)],1),r("dx-column",{attrs:{"data-field":"id",caption:e.$t("general.id"),"data-type":"number",alignment:"right","allow-editing":!1,"header-cell-template":"title-header",width:100,hidden:!0}}),r("dx-column",{attrs:{"data-field":"bus","data-type":"number","header-cell-template":"title-header",caption:e.$t("bus.bus"),"cell-template":"cellTemplate",width:200}},[r("dx-lookup",{attrs:{"data-source":e.buses,"value-expr":"id","display-expr":"name"}}),r("DxRequiredRule")],1),r("dx-column",{attrs:{"data-field":"driver","data-type":"number","header-cell-template":"title-header",caption:e.$t("driver.driver"),"cell-template":"cellTemplate",width:200}},[r("dx-lookup",{attrs:{"data-source":e.drivers,"value-expr":"id","display-expr":"name"}}),r("DxRequiredRule")],1),r("dx-column",{attrs:{"data-field":"datetime","data-type":"datetime","header-cell-template":"title-header",caption:e.$t("bus.schedule"),width:200}},[r("DxRequiredRule")],1),r("dx-column",{attrs:{"data-field":"busRoute","data-type":"number","header-cell-template":"title-header",caption:e.$t("bus.route"),width:500,"cell-template":"routeCellTemplate"}},[r("dx-lookup",{attrs:{"data-source":e.busRoutes,"value-expr":"id","display-expr":"checkpoints"}}),r("DxRequiredRule")],1),r("dx-column",{attrs:{type:"buttons"}},[r("DxButton",{attrs:{name:"edit"}})],1),r("dx-group-panel",{attrs:{visible:!0}}),r("dx-grouping",{attrs:{"auto-expand-all":!1}}),r("dx-pager",{attrs:{visible:!0,"allowed-page-sizes":e.pageSizes,"show-page-size-selector":!0}}),r("dx-paging",{attrs:{"page-size":50}})],1)],1)},p=[],f=r("1da1"),h=r("257e"),b=r("1341"),v=r("7e84"),g=(r("96cf"),r("4e82"),r("0d03"),r("7db0"),r("d3b7"),r("b0c0"),r("25f0"),r("99af"),r("2fe1")),m=r("a113"),x=r("14fd"),y=r("4f6e"),w=r("af097"),k=r("faeb"),O=function(e){Object(s["a"])(r,e);var t=Object(l["a"])(r);function r(){var e,a,n;return Object(i["a"])(this,r),n=t.call(this),n.gridRefKey="scheduleGrid",Object(b["a"])((e=Object(h["a"])(n),Object(v["a"])(r.prototype)),"dataGridRefKey",n.gridRefKey,e,!0),Object(b["a"])((a=Object(h["a"])(n),Object(v["a"])(r.prototype)),"tableName","Bus Schedule",a,!0),n}return Object(o["a"])(r,[{key:"drivers",get:function(){return y["a"].drivers}},{key:"buses",get:function(){return x["a"].buses}},{key:"busRoutes",get:function(){return w["a"].busRoutes}},{key:"schedules",get:function(){return k["a"].schedule.sort((function(e,t){return new Date(e.datetime)>new Date(t.datetime)?-1:0}))}},{key:"thisRoute",value:function(e){return w["a"].busRoutes.find((function(t){return t.id===e}))}},{key:"getList",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,x["a"].getBuses();case 3:return e.next=5,y["a"].getDrivers();case 5:return e.next=7,w["a"].getRoutes();case 7:return e.next=9,k["a"].getBusSchedules();case 9:this.listLoading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onCellClick",value:function(e){if("bus"===e.column.name){var t=e.data.bus;console.log("bus: ".concat(t)),this.$router.push({name:"Buses",params:{busIdProp:t.toString()}})}else if("driver"===e.column.name){var r=e.data.driver;console.log("driver: ".concat(r)),this.$router.push({name:"Drivers",params:{driverIdProp:r.toString()}})}}},{key:"onInitNewRow",value:function(){throw new Error("Method not implemented.")}},{key:"onSaving",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.listLoading=!0,e.prev=1,r=t.changes[0],console.debug(r),"insert"!==r.type){e.next=9;break}return e.next=7,k["a"].addBusSchedule(r.data);case 7:e.next=13;break;case 9:if("update"!==r.type){e.next=13;break}return console.log(r),e.next=13,k["a"].updateBusScedule({id:r.key,data:r.data});case 13:if(this.$notify({title:"Success",message:"Data updated successfully",type:"success",duration:2e3}),"insert"!==t.changes[0].type){e.next=17;break}return e.next=17,this.getList();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),this.$notify({title:"Failed",message:"Data updated failed",type:"error",duration:2e3});case 22:t.cancel=!0,this.listLoading=!1;case 24:case"end":return e.stop()}}),e,this,[[1,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){this.getList()}},{key:"OnDriverIdPropChange",value:function(e,t){console.log("driverIdProp props changed from ".concat(t," to ").concat(e))}},{key:"OnClearFilterTriggered",value:function(e){e&&(this.driverIdProp=void 0)}}]),r}(Object(g["c"])(m["a"]));Object(u["a"])([Object(d["b"])()],O.prototype,"driverIdProp",void 0),Object(u["a"])([Object(d["d"])("driverIdProp")],O.prototype,"OnDriverIdPropChange",null),Object(u["a"])([Object(d["d"])("clearFilterTriggered")],O.prototype,"OnClearFilterTriggered",null),O=Object(u["a"])([Object(d["a"])({name:"ScheduleTable",components:{}})],O);var j=O,D=j,R=(r("ab46"),r("2877")),I=Object(R["a"])(D,c,p,!1,null,null,null),C=I.exports,P=function(e){Object(s["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"groupByDriverId",get:function(){return this.driverIdProp}}]),r}(d["c"]);Object(u["a"])([Object(d["b"])()],P.prototype,"driverIdProp",void 0),P=Object(u["a"])([Object(d["a"])({name:"Schedule",components:{ScheduleTable:C}})],P);var S=P,_=S,T=Object(R["a"])(_,a,n,!1,null,null,null);t["default"]=T.exports},"4e82":function(e,t,r){"use strict";var a=r("23e7"),n=r("e330"),i=r("59ed"),o=r("7b0b"),s=r("07fa"),l=r("577e"),u=r("d039"),d=r("addb"),c=r("a640"),p=r("04d1"),f=r("d998"),h=r("2d00"),b=r("512ce"),v=[],g=n(v.sort),m=n(v.push),x=u((function(){v.sort(void 0)})),y=u((function(){v.sort(null)})),w=c("sort"),k=!u((function(){if(h)return h<70;if(!(p&&p>3)){if(f)return!0;if(b)return b<603;var e,t,r,a,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)v.push({k:t+a,v:r})}for(v.sort((function(e,t){return t.v-e.v})),a=0;a<v.length;a++)t=v[a].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),O=x||!y||!w||!k,j=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};a({target:"Array",proto:!0,forced:O},{sort:function(e){void 0!==e&&i(e);var t=o(this);if(k)return void 0===e?g(t):g(t,e);var r,a,n=[],l=s(t);for(a=0;a<l;a++)a in t&&m(n,t[a]);d(n,j(e)),r=n.length,a=0;while(a<r)t[a]=n[a++];while(a<l)delete t[a++];return t}})},"512ce":function(e,t,r){var a=r("342f"),n=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},ab46:function(e,t,r){"use strict";r("b882")},addb:function(e,t,r){var a=r("4dae"),n=Math.floor,i=function(e,t){var r=e.length,l=n(r/2);return r<8?o(e,t):s(e,i(a(e,0,l),t),i(a(e,l),t),t)},o=function(e,t){var r,a,n=e.length,i=1;while(i<n){a=i,r=e[i];while(a&&t(e[a-1],r)>0)e[a]=e[--a];a!==i++&&(e[a]=r)}return e},s=function(e,t,r,a){var n=t.length,i=r.length,o=0,s=0;while(o<n||s<i)e[o+s]=o<n&&s<i?a(t[o],r[s])<=0?t[o++]:r[s++]:o<n?t[o++]:r[s++];return e};e.exports=i},b882:function(e,t,r){},d998:function(e,t,r){var a=r("342f");e.exports=/MSIE|Trident/.test(a)}}]);